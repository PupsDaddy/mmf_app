from urllib.parse import unquotefrom fastapi import APIRouter, HTTPExceptionfrom sqlalchemy import and_from backend.app.dependencies.database import SessionDepfrom backend.app.models.syllabuses import Syllabus as SyllabusORMfrom backend.app.schemas.syllabuses import Syllabusfrom typing import Listrouter = APIRouter(tags=['Учебные планы'], prefix='/syllabuses')@router.get('/all', response_model=List[Syllabus])def get_all_syllabuses(session:SessionDep):    return session.query(SyllabusORM).all()@router.get('/', response_model=List[Syllabus])def get_all_syllabuses_in(session:SessionDep, ids: str):    ids = [int(i) for i in unquote(ids).split(',')]    return session.query(SyllabusORM).filter(SyllabusORM.id.in_(ids)).all()@router.get('/plan_id')def get_sub_id_by_sub_name(speciality:str, start_year: int, session: SessionDep):    res = session.query(SyllabusORM).where(and_(SyllabusORM.speciality == speciality, SyllabusORM.start_year == start_year)).first()    if res:        return {'plan_id': res.id}