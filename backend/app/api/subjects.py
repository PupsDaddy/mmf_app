from urllib.parse import unquotefrom fastapi import APIRouter, HTTPExceptionfrom sqlalchemy import funcfrom backend.app.dependencies.database import SessionDepfrom backend.app.models.subjects import Subject as SubjectORMfrom backend.app.schemas.subjects import Subjectfrom typing import Listrouter = APIRouter(tags=['Предметы'], prefix='/subjects')@router.get('/all', response_model=List[Subject])def get_all_subjects(session:SessionDep):    return session.query(SubjectORM).all()@router.get('/', response_model=List[Subject])def get_all_subjects_in(session:SessionDep, ids: str):    ids = [int(i) for i in unquote(ids).split(',')]    return session.query(SubjectORM).filter(SubjectORM.id.in_(ids)).all()@router.get('/first_letters', response_model=List[Subject])def get_subjects(sub_name:str, session: SessionDep):    decoded_sub_name = unquote(sub_name)    subjects = session.query(SubjectORM).filter(func.lower(SubjectORM.sub_name).like(decoded_sub_name.lower() + '%'))    return subjects@router.get('/sub_id')def get_sub_id_by_sub_name(sub_name:str, session: SessionDep):    decoded_sub_name = unquote(sub_name)    res = session.query(SubjectORM).where(SubjectORM.sub_name == decoded_sub_name).first()    if res:        return {'sub_id':res.id}